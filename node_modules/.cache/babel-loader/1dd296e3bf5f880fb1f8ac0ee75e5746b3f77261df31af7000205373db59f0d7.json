{"ast":null,"code":"// pages/CourseEditor.jsx\nimport React,{useState,useEffect,useContext}from'react';import{useParams,useNavigate}from'react-router-dom';import{AuthContext}from'../App';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CourseEditor=()=>{const{id}=useParams();const navigate=useNavigate();const{supabase,session}=useContext(AuthContext);const isNewCourse=id===undefined;const[course,setCourse]=useState({title:'',description:'',level:'Beginner',cover_image:null,duration:'Self-paced'});const[lessons,setLessons]=useState([]);const[loading,setLoading]=useState(!isNewCourse);const[saving,setSaving]=useState(false);const[error,setError]=useState(null);const[coverImageFile,setCoverImageFile]=useState(null);const[coverImagePreview,setCoverImagePreview]=useState(null);const[currentLessonId,setCurrentLessonId]=useState(null);const emptyLesson={title:'',content:'',video_url:'',duration:'',order_index:0,isNew:true};const[currentLesson,setCurrentLesson]=useState(emptyLesson);useEffect(()=>{if(!isNewCourse){fetchCourseData();}else{setLoading(false);}},[id,supabase]);const fetchCourseData=async()=>{try{// Fetch course details\nconst{data:courseData,error:courseError}=await supabase.from('courses').select('*').eq('id',id).single();if(courseError)throw courseError;setCourse(courseData);if(courseData.cover_image){setCoverImagePreview(courseData.cover_image);}// Fetch lessons\nconst{data:lessonsData,error:lessonsError}=await supabase.from('lessons').select('*').eq('course_id',id).order('order_index',{ascending:true});if(lessonsError)throw lessonsError;setLessons(lessonsData||[]);}catch(error){console.error('Error fetching course data:',error);setError('Error loading course data');}finally{setLoading(false);}};const handleCourseChange=e=>{const{name,value}=e.target;setCourse({...course,[name]:value});};const handleCoverImageChange=e=>{const file=e.target.files[0];if(file){setCoverImageFile(file);const reader=new FileReader();reader.onload=e=>{setCoverImagePreview(e.target.result);};reader.readAsDataURL(file);}};const handleLessonChange=e=>{const{name,value}=e.target;setCurrentLesson({...currentLesson,[name]:value});};const addNewLesson=()=>{setCurrentLessonId(null);setCurrentLesson({...emptyLesson,order_index:lessons.length});};const editLesson=lesson=>{setCurrentLessonId(lesson.id);setCurrentLesson(lesson);};const saveLesson=async()=>{if(!currentLesson.title){alert('Lesson title is required');return;}try{const lessonToSave={...currentLesson};delete lessonToSave.isNew;if(currentLessonId){// Update existing lesson\nconst{error}=await supabase.from('lessons').update(lessonToSave).eq('id',currentLessonId);if(error)throw error;setLessons(lessons.map(l=>l.id===currentLessonId?{...lessonToSave,id:currentLessonId}:l));}else{// Create new lesson\nlessonToSave.course_id=id||course.id;const{data,error}=await supabase.from('lessons').insert([lessonToSave]).select();if(error)throw error;setLessons([...lessons,data[0]]);}// Reset form\nsetCurrentLessonId(null);setCurrentLesson(emptyLesson);}catch(error){console.error('Error saving lesson:',error);alert('Error saving lesson');}};const deleteLesson=async lessonId=>{if(!window.confirm('Are you sure you want to delete this lesson?')){return;}try{const{error}=await supabase.from('lessons').delete().eq('id',lessonId);if(error)throw error;setLessons(lessons.filter(l=>l.id!==lessonId));if(currentLessonId===lessonId){setCurrentLessonId(null);setCurrentLesson(emptyLesson);}}catch(error){console.error('Error deleting lesson:',error);alert('Error deleting lesson');}};const handleDragEnd=async result=>{if(!result.destination)return;const items=Array.from(lessons);const[reorderedItem]=items.splice(result.source.index,1);items.splice(result.destination.index,0,reorderedItem);// Update order_index for each lesson\nconst updatedLessons=items.map((item,index)=>({...item,order_index:index}));setLessons(updatedLessons);// Update the order in the database\ntry{const updates=updatedLessons.map(lesson=>({id:lesson.id,order_index:lesson.order_index}));for(const update of updates){const{error}=await supabase.from('lessons').update({order_index:update.order_index}).eq('id',update.id);if(error)throw error;}}catch(error){console.error('Error updating lesson order:',error);}};const saveCourse=async()=>{if(!course.title){alert('Course title is required');return;}setSaving(true);try{let coverImageUrl=course.cover_image;// Upload cover image if there's a new one\nif(coverImageFile){const fileExt=coverImageFile.name.split('.').pop();const fileName=`${Date.now()}.${fileExt}`;const filePath=`course-covers/${fileName}`;const{error:uploadError}=await supabase.storage.from('course-media').upload(filePath,coverImageFile);if(uploadError)throw uploadError;const{data}=supabase.storage.from('course-media').getPublicUrl(filePath);coverImageUrl=data.publicUrl;}const courseData={...course,cover_image:coverImageUrl,updated_at:new Date()};if(isNewCourse){// Create new course\ncourseData.created_at=new Date();courseData.creator_id=session.user.id;const{data,error}=await supabase.from('courses').insert([courseData]).select();if(error)throw error;// Navigate to new course page\nnavigate(`/course/edit/${data[0].id}`);}else{// Update existing course\nconst{error}=await supabase.from('courses').update(courseData).eq('id',id);if(error)throw error;}alert(isNewCourse?'Course created successfully!':'Course updated successfully!');}catch(error){console.error('Error saving course:',error);setError('Error saving course');}finally{setSaving(false);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:isNewCourse?'Create New Course':'Edit Course'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"title\",children:\"Course Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:course.title,onChange:handleCourseChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",placeholder:\"Enter course title\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"description\",children:\"Course Description\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:course.description,onChange:handleCourseChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32\",placeholder:\"Enter course description\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"level\",children:\"Course Level\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"level\",name:\"level\",value:course.level,onChange:handleCourseChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Beginner\",children:\"Beginner\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Intermediate\",children:\"Intermediate\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Advanced\",children:\"Advanced\"}),/*#__PURE__*/_jsx(\"option\",{value:\"All Levels\",children:\"All Levels\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"duration\",children:\"Course Duration\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"duration\",name:\"duration\",value:course.duration,onChange:handleCourseChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",placeholder:\"e.g. 2 weeks, 5 hours, Self-paced\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"cover_image\",children:\"Course Cover Image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"cover_image\",accept:\"image/*\",onChange:handleCoverImageChange,className:\"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"}),coverImagePreview&&/*#__PURE__*/_jsx(\"div\",{className:\"ml-4\",children:/*#__PURE__*/_jsx(\"img\",{src:coverImagePreview,alt:\"Cover preview\",className:\"h-16 w-24 object-cover rounded\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>navigate(-1),className:\"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:saveCourse,disabled:saving,className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:saving?'Saving...':isNewCourse?'Create Course':'Save Changes'})]})]}),!isNewCourse&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-6\",children:\"Lessons\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:currentLessonId?'Edit Lesson':'Add New Lesson'}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"lesson_title\",children:\"Lesson Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lesson_title\",name:\"title\",value:currentLesson.title,onChange:handleLessonChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",placeholder:\"Enter lesson title\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"lesson_content\",children:\"Lesson Content\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"lesson_content\",name:\"content\",value:currentLesson.content,onChange:handleLessonChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32\",placeholder:\"Enter lesson content (HTML supported)\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"video_url\",children:\"Video URL (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"url\",id:\"video_url\",name:\"video_url\",value:currentLesson.video_url,onChange:handleLessonChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",placeholder:\"Enter video URL\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-bold mb-2\",htmlFor:\"lesson_duration\",children:\"Lesson Duration (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"lesson_duration\",name:\"duration\",value:currentLesson.duration,onChange:handleLessonChange,className:\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\",placeholder:\"e.g. 15 minutes\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setCurrentLessonId(null);setCurrentLesson(emptyLesson);},className:\"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:saveLesson,className:\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\",children:currentLessonId?'Update Lesson':'Add Lesson'})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Lesson List\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-2 text-gray-600 text-sm\",children:\"Drag and drop to reorder lessons\"}),lessons.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 italic\",children:\"No lessons yet. Add your first lesson above.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:/*#__PURE__*/_jsx(\"ul\",{children:lessons.map((lesson,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"bg-white p-4 rounded-lg shadow mb-2 flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-2 text-gray-400\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M8 9l4-4 4 4m0 6l-4 4-4-4\"})})}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:lesson.title})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>editLesson(lesson),className:\"text-blue-500 hover:text-blue-700 mr-2\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteLesson(lesson.id),className:\"text-red-500 hover:text-red-700\",children:\"Delete\"})]})]},lesson.id))})}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:addNewLesson,className:\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\",children:\"+ Add Another Lesson\"})})]})]})]});};export default CourseEditor;","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","AuthContext","jsx","_jsx","jsxs","_jsxs","CourseEditor","id","navigate","supabase","session","isNewCourse","undefined","course","setCourse","title","description","level","cover_image","duration","lessons","setLessons","loading","setLoading","saving","setSaving","error","setError","coverImageFile","setCoverImageFile","coverImagePreview","setCoverImagePreview","currentLessonId","setCurrentLessonId","emptyLesson","content","video_url","order_index","isNew","currentLesson","setCurrentLesson","fetchCourseData","data","courseData","courseError","from","select","eq","single","lessonsData","lessonsError","order","ascending","console","handleCourseChange","e","name","value","target","handleCoverImageChange","file","files","reader","FileReader","onload","result","readAsDataURL","handleLessonChange","addNewLesson","length","editLesson","lesson","saveLesson","alert","lessonToSave","update","map","l","course_id","insert","deleteLesson","lessonId","window","confirm","delete","filter","handleDragEnd","destination","items","Array","reorderedItem","splice","source","index","updatedLessons","item","updates","saveCourse","coverImageUrl","fileExt","split","pop","fileName","Date","now","filePath","uploadError","storage","upload","getPublicUrl","publicUrl","updated_at","created_at","creator_id","user","className","children","htmlFor","type","onChange","placeholder","required","accept","src","alt","onClick","disabled","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d"],"sources":["/workspaces/BringSpeech/src/pages/CourseEditor.jsx"],"sourcesContent":["// pages/CourseEditor.jsx\nimport React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { AuthContext } from '../App';\n\nconst CourseEditor = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { supabase, session } = useContext(AuthContext);\n  const isNewCourse = id === undefined;\n\n  const [course, setCourse] = useState({\n    title: '',\n    description: '',\n    level: 'Beginner',\n    cover_image: null,\n    duration: 'Self-paced',\n  });\n\n  const [lessons, setLessons] = useState([]);\n  const [loading, setLoading] = useState(!isNewCourse);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const [coverImageFile, setCoverImageFile] = useState(null);\n  const [coverImagePreview, setCoverImagePreview] = useState(null);\n  const [currentLessonId, setCurrentLessonId] = useState(null);\n\n  const emptyLesson = {\n    title: '',\n    content: '',\n    video_url: '',\n    duration: '',\n    order_index: 0,\n    isNew: true,\n  };\n\n  const [currentLesson, setCurrentLesson] = useState(emptyLesson);\n\n  useEffect(() => {\n    if (!isNewCourse) {\n      fetchCourseData();\n    } else {\n      setLoading(false);\n    }\n  }, [id, supabase]);\n\n  const fetchCourseData = async () => {\n    try {\n      // Fetch course details\n      const { data: courseData, error: courseError } = await supabase\n        .from('courses')\n        .select('*')\n        .eq('id', id)\n        .single();\n\n      if (courseError) throw courseError;\n      setCourse(courseData);\n      \n      if (courseData.cover_image) {\n        setCoverImagePreview(courseData.cover_image);\n      }\n\n      // Fetch lessons\n      const { data: lessonsData, error: lessonsError } = await supabase\n        .from('lessons')\n        .select('*')\n        .eq('course_id', id)\n        .order('order_index', { ascending: true });\n\n      if (lessonsError) throw lessonsError;\n      setLessons(lessonsData || []);\n    } catch (error) {\n      console.error('Error fetching course data:', error);\n      setError('Error loading course data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCourseChange = (e) => {\n    const { name, value } = e.target;\n    setCourse({\n      ...course,\n      [name]: value,\n    });\n  };\n\n  const handleCoverImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      setCoverImageFile(file);\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setCoverImagePreview(e.target.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleLessonChange = (e) => {\n    const { name, value } = e.target;\n    setCurrentLesson({\n      ...currentLesson,\n      [name]: value,\n    });\n  };\n\n  const addNewLesson = () => {\n    setCurrentLessonId(null);\n    setCurrentLesson({\n      ...emptyLesson,\n      order_index: lessons.length,\n    });\n  };\n\n  const editLesson = (lesson) => {\n    setCurrentLessonId(lesson.id);\n    setCurrentLesson(lesson);\n  };\n\n  const saveLesson = async () => {\n    if (!currentLesson.title) {\n      alert('Lesson title is required');\n      return;\n    }\n\n    try {\n      const lessonToSave = { ...currentLesson };\n      delete lessonToSave.isNew;\n\n      if (currentLessonId) {\n        // Update existing lesson\n        const { error } = await supabase\n          .from('lessons')\n          .update(lessonToSave)\n          .eq('id', currentLessonId);\n\n        if (error) throw error;\n\n        setLessons(lessons.map(l => l.id === currentLessonId ? { ...lessonToSave, id: currentLessonId } : l));\n      } else {\n        // Create new lesson\n        lessonToSave.course_id = id || course.id;\n        \n        const { data, error } = await supabase\n          .from('lessons')\n          .insert([lessonToSave])\n          .select();\n\n        if (error) throw error;\n\n        setLessons([...lessons, data[0]]);\n      }\n\n      // Reset form\n      setCurrentLessonId(null);\n      setCurrentLesson(emptyLesson);\n    } catch (error) {\n      console.error('Error saving lesson:', error);\n      alert('Error saving lesson');\n    }\n  };\n\n  const deleteLesson = async (lessonId) => {\n    if (!window.confirm('Are you sure you want to delete this lesson?')) {\n      return;\n    }\n\n    try {\n      const { error } = await supabase\n        .from('lessons')\n        .delete()\n        .eq('id', lessonId);\n\n      if (error) throw error;\n\n      setLessons(lessons.filter(l => l.id !== lessonId));\n\n      if (currentLessonId === lessonId) {\n        setCurrentLessonId(null);\n        setCurrentLesson(emptyLesson);\n      }\n    } catch (error) {\n      console.error('Error deleting lesson:', error);\n      alert('Error deleting lesson');\n    }\n  };\n\n  const handleDragEnd = async (result) => {\n    if (!result.destination) return;\n\n    const items = Array.from(lessons);\n    const [reorderedItem] = items.splice(result.source.index, 1);\n    items.splice(result.destination.index, 0, reorderedItem);\n\n    // Update order_index for each lesson\n    const updatedLessons = items.map((item, index) => ({\n      ...item,\n      order_index: index,\n    }));\n\n    setLessons(updatedLessons);\n\n    // Update the order in the database\n    try {\n      const updates = updatedLessons.map(lesson => ({\n        id: lesson.id,\n        order_index: lesson.order_index,\n      }));\n\n      for (const update of updates) {\n        const { error } = await supabase\n          .from('lessons')\n          .update({ order_index: update.order_index })\n          .eq('id', update.id);\n\n        if (error) throw error;\n      }\n    } catch (error) {\n      console.error('Error updating lesson order:', error);\n    }\n  };\n\n  const saveCourse = async () => {\n    if (!course.title) {\n      alert('Course title is required');\n      return;\n    }\n\n    setSaving(true);\n    try {\n      let coverImageUrl = course.cover_image;\n\n      // Upload cover image if there's a new one\n      if (coverImageFile) {\n        const fileExt = coverImageFile.name.split('.').pop();\n        const fileName = `${Date.now()}.${fileExt}`;\n        const filePath = `course-covers/${fileName}`;\n\n        const { error: uploadError } = await supabase.storage\n          .from('course-media')\n          .upload(filePath, coverImageFile);\n\n        if (uploadError) throw uploadError;\n\n        const { data } = supabase.storage\n          .from('course-media')\n          .getPublicUrl(filePath);\n\n        coverImageUrl = data.publicUrl;\n      }\n\n      const courseData = {\n        ...course,\n        cover_image: coverImageUrl,\n        updated_at: new Date(),\n      };\n\n      if (isNewCourse) {\n        // Create new course\n        courseData.created_at = new Date();\n        courseData.creator_id = session.user.id;\n\n        const { data, error } = await supabase\n          .from('courses')\n          .insert([courseData])\n          .select();\n\n        if (error) throw error;\n\n        // Navigate to new course page\n        navigate(`/course/edit/${data[0].id}`);\n      } else {\n        // Update existing course\n        const { error } = await supabase\n          .from('courses')\n          .update(courseData)\n          .eq('id', id);\n\n        if (error) throw error;\n      }\n\n      alert(isNewCourse ? 'Course created successfully!' : 'Course updated successfully!');\n    } catch (error) {\n      console.error('Error saving course:', error);\n      setError('Error saving course');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 gap-8\">\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <h1 className=\"text-2xl font-bold mb-6\">\n          {isNewCourse ? 'Create New Course' : 'Edit Course'}\n        </h1>\n        \n        {error && (\n          <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\n            {error}\n          </div>\n        )}\n        \n        <div className=\"mb-6\">\n          <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"title\">\n            Course Title\n          </label>\n          <input\n            type=\"text\"\n            id=\"title\"\n            name=\"title\"\n            value={course.title}\n            onChange={handleCourseChange}\n            className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            placeholder=\"Enter course title\"\n            required\n          />\n        </div>\n        \n        <div className=\"mb-6\">\n          <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"description\">\n            Course Description\n          </label>\n          <textarea\n            id=\"description\"\n            name=\"description\"\n            value={course.description}\n            onChange={handleCourseChange}\n            className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32\"\n            placeholder=\"Enter course description\"\n          />\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n          <div>\n            <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"level\">\n              Course Level\n            </label>\n            <select\n              id=\"level\"\n              name=\"level\"\n              value={course.level}\n              onChange={handleCourseChange}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            >\n              <option value=\"Beginner\">Beginner</option>\n              <option value=\"Intermediate\">Intermediate</option>\n              <option value=\"Advanced\">Advanced</option>\n              <option value=\"All Levels\">All Levels</option>\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"duration\">\n              Course Duration\n            </label>\n            <input\n              type=\"text\"\n              id=\"duration\"\n              name=\"duration\"\n              value={course.duration}\n              onChange={handleCourseChange}\n              className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n              placeholder=\"e.g. 2 weeks, 5 hours, Self-paced\"\n            />\n          </div>\n        </div>\n        \n        <div className=\"mb-6\">\n          <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"cover_image\">\n            Course Cover Image\n          </label>\n          <div className=\"flex items-center\">\n            <input\n              type=\"file\"\n              id=\"cover_image\"\n              accept=\"image/*\"\n              onChange={handleCoverImageChange}\n              className=\"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            />\n            \n            {coverImagePreview && (\n              <div className=\"ml-4\">\n                <img\n                  src={coverImagePreview}\n                  alt=\"Cover preview\"\n                  className=\"h-16 w-24 object-cover rounded\"\n                />\n              </div>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"flex justify-end\">\n          <button\n            type=\"button\"\n            onClick={() => navigate(-1)}\n            className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2\"\n          >\n            Cancel\n          </button>\n          <button\n            type=\"button\"\n            onClick={saveCourse}\n            disabled={saving}\n            className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n          >\n            {saving ? 'Saving...' : isNewCourse ? 'Create Course' : 'Save Changes'}\n          </button>\n        </div>\n      </div>\n      \n      {!isNewCourse && (\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h2 className=\"text-xl font-bold mb-6\">Lessons</h2>\n          \n          <div className=\"mb-6\">\n            <h3 className=\"text-lg font-semibold mb-4\">\n              {currentLessonId ? 'Edit Lesson' : 'Add New Lesson'}\n            </h3>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"lesson_title\">\n                Lesson Title\n              </label>\n              <input\n                type=\"text\"\n                id=\"lesson_title\"\n                name=\"title\"\n                value={currentLesson.title}\n                onChange={handleLessonChange}\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                placeholder=\"Enter lesson title\"\n              />\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"lesson_content\">\n                Lesson Content\n              </label>\n              <textarea\n                id=\"lesson_content\"\n                name=\"content\"\n                value={currentLesson.content}\n                onChange={handleLessonChange}\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline h-32\"\n                placeholder=\"Enter lesson content (HTML supported)\"\n              />\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"video_url\">\n                Video URL (optional)\n              </label>\n              <input\n                type=\"url\"\n                id=\"video_url\"\n                name=\"video_url\"\n                value={currentLesson.video_url}\n                onChange={handleLessonChange}\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                placeholder=\"Enter video URL\"\n              />\n            </div>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-gray-700 font-bold mb-2\" htmlFor=\"lesson_duration\">\n                Lesson Duration (optional)\n              </label>\n              <input\n                type=\"text\"\n                id=\"lesson_duration\"\n                name=\"duration\"\n                value={currentLesson.duration}\n                onChange={handleLessonChange}\n                className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n                placeholder=\"e.g. 15 minutes\"\n              />\n            </div>\n            \n            <div className=\"flex justify-end\">\n              <button\n                type=\"button\"\n                onClick={() => {\n                  setCurrentLessonId(null);\n                  setCurrentLesson(emptyLesson);\n                }}\n                className=\"bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded mr-2\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"button\"\n                onClick={saveLesson}\n                className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\"\n              >\n                {currentLessonId ? 'Update Lesson' : 'Add Lesson'}\n              </button>\n            </div>\n          </div>\n          \n          <div>\n            <h3 className=\"text-lg font-semibold mb-4\">Lesson List</h3>\n            <p className=\"mb-2 text-gray-600 text-sm\">Drag and drop to reorder lessons</p>\n            \n            {lessons.length === 0 ? (\n              <p className=\"text-gray-500 italic\">No lessons yet. Add your first lesson above.</p>\n            ) : (\n              <div className=\"bg-gray-50 rounded-lg p-4\">\n                <ul>\n                  {lessons.map((lesson, index) => (\n                    <li \n                      key={lesson.id} \n                      className=\"bg-white p-4 rounded-lg shadow mb-2 flex justify-between items-center\"\n                    >\n                      <div className=\"flex items-center\">\n                        <div className=\"mr-2 text-gray-400\">\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 9l4-4 4 4m0 6l-4 4-4-4\"></path>\n                          </svg>\n                        </div>\n                        <span className=\"font-medium\">{lesson.title}</span>\n                      </div>\n                      <div>\n                        <button\n                          onClick={() => editLesson(lesson)}\n                          className=\"text-blue-500 hover:text-blue-700 mr-2\"\n                        >\n                          Edit\n                        </button>\n                        <button\n                          onClick={() => deleteLesson(lesson.id)}\n                          className=\"text-red-500 hover:text-red-700\"\n                        >\n                          Delete\n                        </button>\n                      </div>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n            \n            <div className=\"mt-4\">\n              <button\n                type=\"button\"\n                onClick={addNewLesson}\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n              >\n                + Add Another Lesson\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CourseEditor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}